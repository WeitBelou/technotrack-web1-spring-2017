{% extends 'core/base.html' %}

{% load bootstrap3 %}

{% block title %}Список блогов.{% endblock %}

{% block content %}
  <ul class="list-group">
    <li class="list-group-item">
      <div class="panel-group">
        <div class="panel panel-default">
          <div class="panel-heading">
            <div class="panel-title">
              <a data-toggle="collapse" href="#collapse-filter-form">Поиск</a>
            </div>
          </div>
          <div id="collapse-filter-form" class="panel-collapse collapse">
            <form method="get" action="{% url 'blogs:blog_list' %}">
              <div class="panel-body">
                {% bootstrap_form filter_form %}
              </div>
              <div class="panel-footer">
                {% buttons submit='Фильтр' %}{% endbuttons %}
              </div>
            </form>

          </div>
        </div>
      </div>
    </li>

    <li class="list-group-item">

      <div class="">
        {% if user.is_authenticated %}
          <a class="btn btn-success" href="{% url 'blogs:create_blog' %}">Создать новый блог</a>
        {% endif %}
      </div>
    </li>

    <li class="list-group-item">

      <div class="panel-group" id="accordion">
        {% for blog in object_list %}
          <div class="panel panel-default">
            <div class="panel-heading">
              <h4 class="panel-title">
                <a data-toggle="collapse" data-parent="#accordion" href="#collapse-{{ blog.id }}">
                  {{ blog.title }}.
                </a>
              </h4>
            </div>
            <div id="collapse-{{ blog.id }}" class="panel-collapse collapse">
              <div class="panel-body">
                {{ blog.description }}
                <div class="button-group">
                  <a href="{% url 'blogs:blog_details' pk=blog.id %}">
                    <span class="btn btn-success">Читать</span></a>
                  {% if user == blog.owner %}
                    <a href="{% url 'blogs:update_blog' pk=blog.id %}">
                      <span class="btn btn-warning">Редактировать</span></a>
                  {% endif %}
                </div>
              </div>
              <div class="panel-footer">
                Владелец: {{ blog.owner }}
              </div>
            </div>
          </div>
        {% endfor %}
      </div>
    </li>
  </ul>

{% endblock %}